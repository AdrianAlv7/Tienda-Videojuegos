{% extends 'base.html' %}
{% block title %}{{ juego.nombre }} - Tienda{% endblock %}

{% block extra_css %}
<style>
.detalle-container {
    width: 90%;
    margin: 3rem auto;
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
    color: white;
}

.detalle-imagen {
    flex: 1 1 45%;
}

.detalle-imagen img {
    width: 100%;
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.5);
}

.detalle-info {
    flex: 1 1 45%;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.detalle-info h1 {
    color: #4CAF50;
    font-size: 2.2rem;
    margin-bottom: 10px;
}

.detalle-info p {
    color: #ccc;
    font-size: 1rem;
    margin-bottom: 1rem;
}

.precio {
    font-size: 1.5rem;
    color: #00e676;
    margin: 1rem 0;
}

.btn-comprar {
    background: #4CAF50;
    border: none;
    color: white;
    padding: 12px 24px;
    border-radius: 8px;
    font-size: 1.1rem;
    cursor: pointer;
    transition: 0.3s;
}

.btn-comprar:hover {
    background: #45a049;
    transform: scale(1.05);
}

.galeria {
    margin-top: 3rem;
}

.galeria h3 {
    color: #4CAF50;
    margin-bottom: 1rem;
}

.galeria-imgs {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
}

.galeria-imgs img {
    width: 250px;
    height: 150px;
    object-fit: cover;
    border-radius: 10px;
    transition: transform 0.3s;
}

.galeria-imgs img:hover {
    transform: scale(1.1);
}
.detalle-volver {
    width: 100%;
    display: flex;
    justify-content: flex-start;
    margin-bottom: 1rem;
}

.btn-volver {
    background-color: #4CAF50;
    border: none;
    color: white;
    padding: 10px 18px;
    border-radius: 8px;
    font-size: 1rem;
    cursor: pointer;
    transition: 0.3s;
}

.btn-volver:hover {
    background-color: #45a049;
    transform: scale(1.05);
}
.galeria {
  margin-top: 3rem;
  width: 90%;
  margin-left: auto;
  margin-right: auto;
}

.galeria h3 {
  color: #4CAF50;
  margin-bottom: 1rem;
  text-align: left;
  font-size: 1.4rem;
}

.galeria-imgs {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  justify-content: flex-start;
}

.galeria-imgs img {
  width: 260px;
  height: 160px;
  object-fit: cover;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.galeria-imgs img:hover {
  transform: scale(1.08);
  box-shadow: 0 6px 15px rgba(0,0,0,0.5);
}

</style>
{% endblock %}

{% block content %}
<div class="detalle-volver">
<a href="{{ back_url }}" class="btn-volver" style="background:#444;margin-left:5%;margin-top:20px;display:inline-block;">
  â¬… Regresar
</a>
</div>



<div class="detalle-container">
    <div class="detalle-imagen">
        <img src="{{ url_for('static', filename='IMG/productos/' + (juego.imagen or 'default.png')) }}" alt="{{ juego.nombre }}">
    </div>
    <div class="detalle-info">
  <h1>{{ juego.nombre }}</h1>
  <p>{{ juego.descripcion }}</p>
  <div class="precio">${{ juego.precio }}</div>

  {% if juego.en_biblioteca %}
    <!-- Si ya lo tiene -->
    <a href="{{ url_for('main.descargar_juego_imagen', nombre_imagen=juego.imagen, nombre_juego=juego.nombre) }}"
   class="btn-comprar" style="background:#555;">ðŸŽ® Jugar</a>

  {% else %}
    <!-- Si no lo tiene -->
    <button class="btn-comprar" id="btnComprar" 
            data-id="{{ juego.id }}" 
            data-nombre="{{ juego.nombre }}" 
            data-precio="{{ juego.precio }}">
      ðŸ›’ Agregar al carrito
    </button>
  {% endif %}
</div>

</div>

<div class="galeria">
  <div class="galeria">
  <h3>Capturas del juego</h3>
  <div class="galeria-imgs">
    {% for img in juego.galeria %}
      <img src="{{ url_for('static', filename='IMG/productos/' + img) }}" alt="Captura de {{ juego.nombre }}">
    {% else %}
      <p>No hay imÃ¡genes adicionales aÃºn.</p>
    {% endfor %}
  </div>
</div>

</div>


    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("btnComprar");
    if (!btn) return;

    btn.addEventListener("click", () => {
        const id = btn.dataset.id;
        const nombre = btn.dataset.nombre;
        const precio = parseFloat(btn.dataset.precio);

        alert(`ðŸ›’ Has agregado "${nombre}" al carrito ($${precio})`);
        // AquÃ­ podrÃ­as hacer fetch("/procesar_compra", {...})
    });
});
</script>

{% endblock %}
